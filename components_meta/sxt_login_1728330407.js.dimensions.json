{
    "id": "sxt_login_1728330407",
    "name": "sxt_login",
    "type": "containerComponent",
    "metadata": {
        "markdownText": "<template>\n  <div class=\"flex items-center justify-center w-full h-full bg-white\">\n    <div>\n      <div v-if=\"!isLoggedIn\">\n        <button class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n          @click=\"openModal\">Login</button>\n      </div>\n      <div v-else>\n        <button class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n          @click=\"handleLogout\">Logout\n        </button>\n        <div>{{ getUserInformation().userId }}</div>\n      </div>\n    </div>\n    <dialog ref=\"loginModal\">\n      <div class=\"w-full max-w-sm p-6 bg-gray-200 rounded-lg shadow-md\">\n        <h2 class=\"text-2xl font-semibold text-center text-gray-700 mb-6\">Login</h2>\n        <form @submit.prevent=\"handleLogin\">\n          <div class=\"mb-4\">\n            <label for=\"text\" class=\"block text-sm font-medium text-gray-700\">Username:</label>\n            <input type=\"text\" id=\"email\" v-model=\"username\" required\n              class=\"w-full px-4 py-2 mt-2 text-gray-700 bg-white border rounded-md focus:border-blue-500 focus:outline-none focus:ring\">\n          </div>\n          <div class=\"mb-6\">\n            <label for=\"password\" class=\"block text-sm font-medium text-gray-700\">Password:</label>\n            <input type=\"password\" id=\"password\" v-model=\"password\" required\n              class=\"w-full px-4 py-2 mt-2 text-gray-700 bg-white border rounded-md focus:border-blue-500 focus:outline-none focus:ring\">\n          </div>\n          <div class=\"flex items-center justify-between\">\n            <button @click=\"closeModal\"\n              class=\"w-full px-4 py-2 text-white bg-red-500 rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600 m-1\">\n              Cancel\n            </button>\n            <button type=\"submit\"\n              class=\"w-full px-4 py-2 text-white bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600 m-1\">\n              Login\n            </button>\n          </div>\n        </form>\n      </div>\n    </dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      username: '',\n      password: '',\n      isLoggedIn: false,\n      isLoading: false,\n      showLogin: false\n    };\n  },\n  beforeMount: function () {\n    // check to see if we have user credentials in localStorage\n    const credentials = localStorage.getItem('userInformation');\n    if (credentials) {\n      this.isLoggedIn = true;\n    }\n  },\n  methods: {\n    async handleLogin() {\n      try {\n        console.log('Username:', this.username);\n        console.log('Password:', this.password);\n\n        await this.loginUser({\n          'userId': this.username,\n          'password': this.password\n        });\n        this.isLoggedIn = true;\n        this.closeModal();\n      } catch (error) {\n        console.log(error)\n      } finally {\n        this.isLoading = false;\n        this.username = '';\n        this.password = '';\n      }\n    },\n    handleLogout() {\n      try {\n        this.logoutUser();\n        this.showLogin = false;\n        this.isLoggedIn = false;\n      } catch (error) {\n\n      } finally {\n\n      }\n    },\n    getUserInformation() {\n      return JSON.parse(localStorage.getItem('userInformation'));\n    },\n    openModal() {\n      this.$refs.loginModal.showModal();\n    },\n    closeModal() {\n      this.$refs.loginModal.close();\n    },\n    async loginUser(credentials) {\n      const tempHardcodedLoginPath = `https://proxy.stage.cosmicmoment.dev/auth/login`\n      let response = await fetch(tempHardcodedLoginPath, {\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\",\n        'X-Sxt-Login': 'true'\n      },\n      method: \"POST\",\n      body: JSON.stringify(credentials)\n      })\n      if (!response.ok) {\n      throw new Error(\"failed to login user\")\n      }\n      let responseData = await response.json();\n      console.log(responseData);\n\n      // add info to localStorage\n      const userInformation = {\n      userId: credentials.userId,\n      ...responseData\n      }\n\n      localStorage.setItem('userInformation', JSON.stringify(userInformation));\n    },\n    async logoutUser() {\n      localStorage.removeItem(\"userInformation\");\n    }\n  },\n};\n</script>"
    },
    "w": 7,
    "h": 7,
    "x": 7,
    "y": 43,
    "i": "__dropping-elem__",
    "minW": 3,
    "maxW": 12,
    "minH": 1,
    "moved": false,
    "static": false,
    "isDraggable": true,
    "isResizable": true
}